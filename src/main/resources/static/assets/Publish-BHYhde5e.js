import{d as T,r as b,a as j,i as F,c as m,k as z,e as o,w as c,l as B,u as S,f as n,o as v,b as a,g as i,F as U,j as q,t as f,n as E,T as I,m as L,h as g,s as M}from "./index-BwHCGXaB.js";import{s as y}from "./request-DJmCW_Ev.js";import{_ as P}from "./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"page-container publish-page"},D={class:"nav-back"},R={class:"section-card category-section"},A={class:"category-grid"},G=["onClick"],H={class:"cat-icon-wrapper"},J={class:"cat-emoji"},K={class:"cat-label"},O={key:0,class:"check-badge"},Q={class:"section-card form-detail-card"},W={class:"input-group"},X={class:"section-card price-card"},Y={class:"price-header"},Z={class:"balance-capsule"},ee={class:"price-input-container"},ae={class:"submit-area"},se=T({__name:"Publish",setup(te){const _=S(),d=b(!1),u=b(0),h=[{label:"è·‘è…¿ä»£å–",value:"run",icon:"ğŸƒ"},{label:"å­¦ä¹ è¾…å¯¼",value:"study",icon:"ğŸ“š"},{label:"ç”Ÿæ´»äº’åŠ©",value:"life",icon:"â˜•"}],t=j({title:"",description:"",price:"",category:"run",location:""});F(()=>{V()});const V=async()=>{try{const l=await y.get("/user/profile");u.value=l.balance}catch{}},k=async()=>{const l=parseFloat(t.price);if(isNaN(l)||l<=0)return g("é‡‘é¢ä¸æ­£ç¡®");if(l>u.value)return g("ä½™é¢ä¸è¶³");d.value=!0;try{await y.post("/tasks/publish",{...t,price:l}),M("å‘å¸ƒæˆåŠŸï¼"),setTimeout(()=>_.replace("/hall"),1e3)}catch{}finally{d.value=!1}};return(l, e)=>{const p=n("van-icon"),w=n("van-nav-bar"),r=n("van-field"),x=n("van-divider"),C=n("van-button"),N=n("van-form");return v(),m("div",$,[e[12]||(e[12]=z('<div class="header-bg" data-v-00a6ef6a><div class="header-decoration-circle" data-v-00a6ef6a></div><div class="header-content" data-v-00a6ef6a><h2 class="page-title" data-v-00a6ef6a>å‘å¸ƒå…¬ç›Šéœ€æ±‚</h2><p class="page-subtitle" data-v-00a6ef6a>è®©æ—¶é—´äº§ç”Ÿä»·å€¼ï¼Œè®©äº’åŠ©ä¼ é€’æ¸©æš–</p></div></div>',1)),o(w,{"left-arrow":"",onClickLeft:e[0]||(e[0]= s=>B(_).back()),border:!1,class:"nav-header"},{left:c(()=>[a("div",D,[o(p,{name:"arrow-left",size:"20"}),e[5]||(e[5]=a("span",null,"å–æ¶ˆ",-1))])]),_:1}),o(N,{onSubmit:k,class:"form-content slide-up"},{default:c(()=>[a("div",R,[e[6]||(e[6]=a("div",{class:"card-title"},[a("span",{class:"emoji"},"ğŸ·ï¸"),i(" ä»»åŠ¡ç±»å‹ ")],-1)),a("div",A,[(v(),m(U,null,q(h, s=>a("div",{key:s.value,class:E(["category-item",{active:t.category===s.value}]),onClick: oe=>t.category=s.value},[a("div",H,[a("span",J,f(s.icon),1)]),a("span",K,f(s.label),1),o(I,{name:"scale-fade"},{default:c(()=>[t.category===s.value?(v(),m("div",O,[o(p,{name:"success",size:"10",color:"#fff"})])):L("",!0)]),_:2},1024)],10,G)),64))])]),a("div",Q,[e[7]||(e[7]=a("div",{class:"card-title"},[a("span",{class:"emoji"},"ğŸ“"),i(" éœ€æ±‚è¯¦æƒ… ")],-1)),a("div",W,[o(r,{modelValue:t.title,"onUpdate:modelValue":e[1]||(e[1]= s=>t.title=s),name:"title",placeholder:"ä»»åŠ¡æ ‡é¢˜ (ä¾‹å¦‚: å¸®å–å¿«é€’)",rules:[{required:!0,message:"è¯·è¾“å…¥æ ‡é¢˜"}],class:"custom-field title-input"},null,8,["modelValue"]),o(r,{modelValue:t.location,"onUpdate:modelValue":e[2]||(e[2]= s=>t.location=s),name:"location",placeholder:"æ‰§è¡Œåœ°ç‚¹","left-icon":"location-o",rules:[{required:!0,message:"è¯·è¾“å…¥åœ°ç‚¹"}],class:"custom-field"},null,8,["modelValue"]),o(x,{style:{margin:"8px 16px",borderColor:"#f5f5f5"}}),o(r,{modelValue:t.description,"onUpdate:modelValue":e[3]||(e[3]= s=>t.description=s),rows:"3",autosize:"",type:"textarea",maxlength:"100",placeholder:"è¯·è¯¦ç»†æè¿°æ‚¨çš„éœ€æ±‚ï¼Œæè¿°è¶Šæ¸…æ™°æ¥å•è¶Šå¿«å“¦...","show-word-limit":"",class:"custom-field area-input"},null,8,["modelValue"])])]),a("div",X,[a("div",Y,[e[8]||(e[8]=a("div",{class:"label-box"},[a("span",{class:"emoji"},"ğŸ’°"),i(" æ‚¬èµé‡‘é¢ ")],-1)),a("div",Z," ä½™é¢: "+f(u.value.toFixed(1)),1)]),a("div",ee,[e[9]||(e[9]=a("span",{class:"currency-symbol"},"TIME",-1)),o(r,{modelValue:t.price,"onUpdate:modelValue":e[4]||(e[4]= s=>t.price=s),type:"number",name:"price",class:"price-input",placeholder:"0.0",rules:[{required:!0,message:"è¯·è¾“å…¥"}]},null,8,["modelValue"])]),e[10]||(e[10]=a("div",{class:"price-footer"},[i(" å»ºè®®æ‚¬èµ "),a("span",{class:"highlight"},"2.0"),i(" ä»¥ä¸Šæ¥å•æ›´å¿« ")],-1))]),a("div",ae,[o(C,{round:"",block:"","native-type":"submit",class:"submit-btn",loading:d.value,"loading-text":"å‘å¸ƒä¸­..."},{default:c(()=>[e[11]||(e[11]=i(" ç«‹å³å‘å¸ƒ ",-1)),o(p,{name:"guide-o",class:"btn-icon"})]),_:1},8,["loading"])])]),_:1})])}}}),re=P(se,[["__scopeId","data-v-00a6ef6a"]]);export{re as default};
