import{s as y}from "./request-DJmCW_Ev.js";import{B as z}from "./BottomNav-EFK4FiqL.js";import{d as L,r as l,i as j,c as f,b as s,e as c,t as o,w as u,f as r,o as h,F as x,j as T,n as A,g as k,s as E}from "./index-BwHCGXaB.js";import{s as R}from "./function-call-6BMVRPF4.js";import{_ as q}from "./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"hall-page"},J={class:"header-area"},K={class:"asset-card"},O={class:"user-row"},P={class:"avatar-box"},Q={class:"welcome-text"},W={class:"hi"},X={class:"role"},Y={class:"balance-row"},Z={class:"amount-group"},ss={class:"number"},es={class:"category-tabs"},ts=["onClick"],as={class:"list-container"},os={class:"price-badge"},ns={class:"val"},ls={class:"card-top"},cs={class:"publisher-avatar"},is={class:"publisher-info"},rs={class:"name"},ds={class:"time"},us={class:"card-content"},vs={class:"task-title"},_s={class:"task-desc"},ps={class:"location-row"},fs={class:"card-action"},hs=L({__name:"Hall",setup(ms){const d=l([]),i=l({}),v=l(!1),_=l(!1),p=l(!1),m=l(1),g=l(""),B=[{label:"å…¨éƒ¨",value:""},{label:"ğŸƒ è·‘è…¿",value:"run"},{label:"ğŸ“š è¾…å¯¼",value:"study"},{label:"ğŸ¥¤ ç”Ÿæ´»",value:"life"}];j(()=>{V()});const V=async()=>{try{const a=await y.get("/user/profile");i.value=a}catch{}},I= a=>{g.value=a,b()},w=async()=>{try{const a=await y.get("/tasks/list",{params:{page:m.value,size:10,category:g.value||null}});p.value&&(d.value=[],p.value=!1),d.value.push(...a.records),d.value.length>=a.total?_.value=!0:m.value++}catch{_.value=!0}finally{v.value=!1}},b=()=>{_.value=!1,v.value=!0,m.value=1,d.value=[],w()},D= a=>{R({title:"ç¡®è®¤æŠ¢å•",message:"ç¡®è®¤æ¥å–è¯¥ä»»åŠ¡å—ï¼Ÿæ¥å•åè¯·å°½å¿«è”ç³»å‘å¸ƒè€…ã€‚",theme:"round-button",confirmButtonColor:"#00C853"}).then(async()=>{try{await y.post("/orders/accept",{taskId:a}),E("æŠ¢å•æˆåŠŸ"),b()}catch{}})},N= a=>({run:"è·‘è…¿",study:"è¾…å¯¼",life:"ç”Ÿæ´»"})[a]||"å…¶ä»–",U= a=>{if(!a)return"";const t=new Date(a),n=(new Date().getTime()-t.getTime())/1e3;return n<60?"åˆšåˆš":n<3600?`${Math.floor(n/60)}åˆ†é’Ÿå‰`:n<86400?`${Math.floor(n/3600)}å°æ—¶å‰`:a.substring(5,16).replace("T"," ")};return(a, t)=>{const C=r("van-sticky"),n=r("van-tag"),$=r("van-icon"),F=r("van-button"),H=r("van-list"),M=r("van-pull-refresh");return h(),f("div",G,[s("div",J,[s("div",K,[t[4]||(t[4]=s("div",{class:"card-bg-decoration"},null,-1)),s("div",O,[s("div",P,o(i.value.id?i.value.id%10:"U"),1),s("div",Q,[s("div",W,"Hi, åŒå­¦ "+o(i.value.nickname||""),1),s("div",X,"ä¿¡ç”¨åˆ† "+o(i.value.creditScore||100)+" | è¿™é‡Œçš„æ¯ä¸€åˆ†é’Ÿéƒ½æœ‰ä»·å€¼",1)])]),s("div",Y,[t[3]||(t[3]=s("div",{class:"label"},"å½“å‰èµ„äº§ (TimeCoin)",-1)),s("div",Z,[t[2]||(t[2]=s("span",{class:"symbol"},"âŒ›",-1)),s("span",ss,o((i.value.balance||0).toFixed(1)),1)])])])]),c(C,{"offset-top":"0"},{default:u(()=>[s("div",es,[(h(),f(x,null,T(B, e=>s("div",{key:e.value,class:A(["tab-item",{active:g.value===e.value}]),onClick: S=>I(e.value)},o(e.label),11,ts)),64))])]),_:1}),s("div",as,[c(M,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]= e=>p.value=e),onRefresh:b,"success-text":"åˆ·æ–°æˆåŠŸ"},{default:u(()=>[c(H,{loading:v.value,"onUpdate:loading":t[0]||(t[0]= e=>v.value=e),finished:_.value,"finished-text":"æ²¡æœ‰æ›´å¤šä»»åŠ¡äº†",onLoad:w},{default:u(()=>[(h(!0),f(x,null,T(d.value, e=>(h(),f("div",{key:e.id,class:"task-card-premium slide-in-item"},[s("div",os,[t[5]||(t[5]=s("span",{class:"unit"},"ğŸ’°",-1)),s("span",ns,o(e.price),1)]),s("div",ls,[s("div",cs,o(e.publisherId%10),1),s("div",is,[s("div",rs,"åŒå­¦ "+o(e.publisherId),1),s("div",ds,o(U(e.createTime))+" å‘å¸ƒ",1)])]),s("div",us,[s("h3",vs,[c(n,{type:"primary",plain:"",class:"cat-tag"},{default:u(()=>[k(o(N(e.category)),1)]),_:2},1024),k(" "+o(e.title),1)]),s("p",_s,o(e.description||"æš‚æ— è¯¦ç»†æè¿°"),1),s("div",ps,[c($,{name:"location",color:"#999"}),s("span",null,o(e.location),1)])]),s("div",fs,[c(F,{block:"",round:"",class:"accept-btn",onClick: S=>D(e.id)},{default:u(()=>[...t[6]||(t[6]=[k(" ç«‹å³æŠ¢å• ",-1)])]),_:1},8,["onClick"])])]))),128))]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"])]),c(z)])}}}),Cs=q(hs,[["__scopeId","data-v-706a2ec8"]]);export{Cs as default};
