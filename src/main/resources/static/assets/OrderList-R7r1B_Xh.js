import{d as q,r as _,q as F,i as I,c,e as o,b as a,l as O,u as R,f as n,w as v,p as $,m,F as j,j as z,o as r,t as l,g as f,s as E}from "./index-BwHCGXaB.js";import{s as g}from "./request-DJmCW_Ev.js";import{s as M}from "./function-call-6BMVRPF4.js";import{_ as U}from "./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"page-container order-page"},G={class:"list-content"},H={class:"card-header"},J={class:"time"},K={class:"card-body"},P={class:"title"},Q={class:"row"},W={class:"price"},X={class:"row"},Y={key:0,class:"card-footer"},Z={key:1,class:"card-footer"},tt={class:"tip success-tip"},st=q({__name:"OrderList",setup(et){const b=F(),k=R(),i=_(b.query.type==="accepted"?"accepted":"posted"),d=_([]),p=_(!1);I(()=>{u()});const h=()=>{d.value=[],u()},u=async()=>{p.value=!0;try{const s=i.value==="posted"?"/tasks/my":"/orders/my",t=await g.get(s);d.value=t||[]}catch(s){console.error(s)}finally{p.value=!1}},C= s=>{M({title:"ç¡®è®¤ç»“ç®—",message:"ç¡®è®¤å¯¹æ–¹å·²å®Œæˆä»»åŠ¡ï¼Ÿèµ„é‡‘å°†ç«‹å³è½¬å…¥å¯¹æ–¹è´¦æˆ·ã€‚"}).then(async()=>{await g.post("/orders/confirm",{orderId:s.id}),E("ç»“ç®—æˆåŠŸ"),u()})},w= s=>({0:"primary",1:"warning",2:"success",3:"success"})[s]||"default",T= s=>({0:"å¾…æ¥å•",1:"è¿›è¡Œä¸­",2:"å¾…ç¡®è®¤",3:"å·²å®Œæˆ"})[s]||"æœªçŸ¥",x= s=>s?s.replace("T"," ").substring(0,16):"";return(s, t)=>{const B=n("van-nav-bar"),y=n("van-tab"),L=n("van-tabs"),N=n("van-empty"),S=n("van-tag"),V=n("van-button"),D=n("van-icon");return r(),c("div",A,[o(B,{title:"æˆ‘çš„ä»»åŠ¡","left-arrow":"",onClickLeft:t[0]||(t[0]= e=>O(k).back()),fixed:"",placeholder:""}),o(L,{active:i.value,"onUpdate:active":t[1]||(t[1]= e=>i.value=e),sticky:"",onChange:h,color:"#00C853"},{default:v(()=>[o(y,{title:"æˆ‘å‘å¸ƒçš„",name:"posted"}),o(y,{title:"æˆ‘å‚ä¸çš„",name:"accepted"})]),_:1},8,["active"]),a("div",G,[d.value.length===0&&!p.value?(r(),$(N,{key:0,description:"æš‚æ— ç›¸å…³è®°å½•"})):m("",!0),(r(!0),c(j,null,z(d.value, e=>(r(),c("div",{key:e.id,class:"order-card slide-up-item"},[a("div",H,[a("span",J,l(x(e.createTime)),1),o(S,{type:w(e.status),plain:""},{default:v(()=>[f(l(T(e.status)),1)]),_:2},1032,["type"])]),a("div",K,[a("h3",P,l(e.title),1),a("div",Q,[t[2]||(t[2]=a("span",{class:"label"},"æ‚¬èµé‡‘é¢:",-1)),a("span",W,"ğŸ’° "+l(e.price),1)]),a("div",X,[t[3]||(t[3]=a("span",{class:"label"},"åœ°ç‚¹:",-1)),a("span",null,l(e.location),1)])]),i.value==="posted"&&e.status===1?(r(),c("div",Y,[t[5]||(t[5]=a("div",{class:"tip"},"å¯¹æ–¹å·²æ¥å•ï¼Œç¡®è®¤ä»»åŠ¡å®Œæˆåç‚¹å‡»å³ä¾§æŒ‰é’®ç»“ç®—",-1)),o(V,{size:"small",round:"",type:"primary",color:"#00C853",onClick: at=>C(e)},{default:v(()=>[...t[4]||(t[4]=[f(" ç¡®è®¤å®Œæˆ ",-1)])]),_:1},8,["onClick"])])):m("",!0),e.status===3?(r(),c("div",Z,[a("div",tt,[o(D,{name:"checked"}),t[6]||(t[6]=f(" ä»»åŠ¡å·²å®Œæˆï¼Œèµ„é‡‘å·²ç»“ç®— ",-1))])])):m("",!0)]))),128))])])}}}),lt=U(st,[["__scopeId","data-v-c829e33c"]]);export{lt as default};
