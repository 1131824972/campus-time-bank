import{d as C,r as _,a as g,c as S,b as o,e as s,f as d,w as a,o as U,u as q,g as w,s as b,h as I}from "./index-BwHCGXaB.js";import{s as V}from "./request-DJmCW_Ev.js";import{_ as P}from "./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"login-page"},B={class:"login-content"},F={class:"logo-section"},L={class:"logo-circle pulse-anim"},N={class:"glass-card slide-up"},R={class:"icon-box"},z={class:"icon-box"},E={class:"btn-wrap"},j={class:"icon-box"},A={class:"icon-box"},D={class:"icon-box"},G={class:"btn-wrap"},H=C({__name:"Login",setup(J){const y=q(),c=_(0),l=_(!1),r=g({username:"",password:""}),t=g({username:"",password:"",confirmPassword:""}),h=async()=>{l.value=!0;try{const u=await V.post("/auth/login",r);localStorage.setItem("token",u.token),localStorage.setItem("userId",String(u.userId)),b("欢迎回来！"),y.replace("/hall")}catch{}finally{l.value=!1}},k=async()=>{if(t.password!==t.confirmPassword)return I("两次密码不一致");l.value=!0;try{await V.post("/auth/register",{username:t.username,password:t.password}),b("注册成功"),c.value=0,r.username=t.username}catch{}finally{l.value=!1}};return(u, e)=>{const i=d("van-icon"),m=d("van-field"),p=d("van-button"),v=d("van-form"),f=d("van-tab"),x=d("van-tabs");return U(),S("div",T,[e[11]||(e[11]=o("div",{class:"bg-shape shape-1"},null,-1)),e[12]||(e[12]=o("div",{class:"bg-shape shape-2"},null,-1)),o("div",B,[o("div",F,[o("div",L,[s(i,{name:"clock",size:"48",color:"#fff"})]),e[6]||(e[6]=o("h1",{class:"app-name"},"校园时间银行",-1)),e[7]||(e[7]=o("p",{class:"app-slogan"},"互助 · 公益 · 传递价值",-1))]),o("div",N,[s(x,{active:c.value,"onUpdate:active":e[5]||(e[5]= n=>c.value=n),background:"transparent","line-width":"20px","line-height":"3px",color:"#00C853","title-active-color":"#00C853"},{default:a(()=>[s(f,{title:"登录"},{default:a(()=>[s(v,{onSubmit:h,class:"auth-form"},{default:a(()=>[s(m,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]= n=>r.username=n),name:"username",placeholder:"请输入学号",class:"custom-input",rules:[{required:!0,message:"请填写学号"}]},{"left-icon":a(()=>[o("div",R,[s(i,{name:"manager"})])]),_:1},8,["modelValue"]),s(m,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]= n=>r.password=n),type:"password",name:"password",placeholder:"请输入密码",class:"custom-input",rules:[{required:!0,message:"请填写密码"}]},{"left-icon":a(()=>[o("div",z,[s(i,{name:"lock"})])]),_:1},8,["modelValue"]),o("div",E,[s(p,{round:"",block:"",type:"primary","native-type":"submit",loading:l.value,class:"gradient-btn"},{default:a(()=>[...e[8]||(e[8]=[w(" 立即登录 ",-1)])]),_:1},8,["loading"])])]),_:1})]),_:1}),s(f,{title:"注册"},{default:a(()=>[s(v,{onSubmit:k,class:"auth-form"},{default:a(()=>[s(m,{modelValue:t.username,"onUpdate:modelValue":e[2]||(e[2]= n=>t.username=n),name:"username",placeholder:"您的学号",class:"custom-input",rules:[{required:!0,message:"请填写学号"}]},{"left-icon":a(()=>[o("div",j,[s(i,{name:"manager"})])]),_:1},8,["modelValue"]),s(m,{modelValue:t.password,"onUpdate:modelValue":e[3]||(e[3]= n=>t.password=n),type:"password",name:"password",placeholder:"设置密码",class:"custom-input",rules:[{required:!0,message:"请填写密码"}]},{"left-icon":a(()=>[o("div",A,[s(i,{name:"lock"})])]),_:1},8,["modelValue"]),s(m,{modelValue:t.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]= n=>t.confirmPassword=n),type:"password",name:"confirmPassword",placeholder:"确认密码",class:"custom-input",rules:[{required:!0,message:"请确认密码"}]},{"left-icon":a(()=>[o("div",D,[s(i,{name:"checked"})])]),_:1},8,["modelValue"]),o("div",G,[s(p,{round:"",block:"",type:"success","native-type":"submit",loading:l.value,class:"gradient-btn green-btn"},{default:a(()=>[...e[9]||(e[9]=[w(" 注册并登录 ",-1)])]),_:1},8,["loading"])])]),_:1})]),_:1})]),_:1},8,["active"])]),e[10]||(e[10]=o("p",{class:"copyright"},"© 2024 Campus Time Bank",-1))])])}}}),Q=P(H,[["__scopeId","data-v-99577882"]]);export{Q as default};
